---
layout: post
title: 方差计算太复杂？写个函数记住 Ta！
author: 郭靓
---

### 介绍
方差的具体运算

### 代码

```r
Ta <- function(data) {      # 为 Ta 设定功能
  # n 为项数，求项数 n，也就是求这组数据的长度
  n <- length(data)
  # mean为求平均值的函数，sum 为求和的函数，该式为求平均值
  mean <- sum(data) / n
  # 该式为求方差的函数，data为这组数据的每个数值，mean为平均值
  var <- sum((data - mean)^2) / n
  # 返回 var 值
  return(var)
}
```

### 演示

```r
x <- c(63,69,71,60,73,68,57)  # 为 x 赋值
Ta(x)      # 求功能 Ta 的结果
```

```
## [1] 30.40816
```

### 点评
这是个非常棒的方差计算函数。作者对 R 的理解应该是有了一定深度，至少对 R 中的向量运算有了一定的了解。函数中首先求一组数的均值，使用 `sum()` 函数可以直接求取一个向量的各数值之和。随后利用所得的均值继续求方差，这里直接使用向量来减去一个常数，再平方，即实现了向量中各值减去常数再平方，也即每项的离均差平方，最后再用 `sum()` 来求出离均差平方和。

在 R 中，向量是储存数据的一个最基本的单位。然而有时候对向量进行的运算与常规程序设计语言有些出入，如果不注意可能会得到一些意想不到的结果，所以好好把握好向量的运算对之后 R 的应用会有很大的帮助。

此外，有了这个方差计算函数之后还可以去考虑写写其他的描述统计量的函数，虽然在 R 中基本都已经有提供了其实现，但自己写了之后，对自己的水平肯定会有个很大的提升。

